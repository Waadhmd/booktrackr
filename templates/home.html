<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Library</title>
</head>
<body>
    <h1>My Library</h1>

    <form method="get" action="{{ url_for('home') }}">
        <label for="sort">Sort by:</label>
        <select name="sort" id="sort" onchange="this.form.submit()">
           <option value="title" {% if sort_by == 'title' %}selected{% endif %} >Title</option>
            <option value="author" {% if sort_by == 'author' %}selected{% endif %}>Author</option>
        </select>
    </form>

    <hr>
    <!-- Search form -->
    <form method="get" action="{{ url_for('home') }}">
        <input type="text" name="q" placeholder="Search books..." value="{{ search_query }}">
        <button type="submit">Search</button>
    </form>

    <hr>

    {% if books %}
    {% for book in books %}
    <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
        <h3><a href="{{ url_for('book_detail', book_id=book.id) }}">{{ book.title }}</a></h3>
        <p>Author: {{ book.author.name }}</p>
        {% if book.isbn %}
        <img src="https://covers.openlibrary.org/b/isbn/{{ book.isbn }}-M.jpg" alt="{{ book.title }}" />
         {% endif %}
     </div>
     {% endfor %}

    {% else %}
        <p>No books in the library yet.</p>
    {% endif %}
</body>
</html>